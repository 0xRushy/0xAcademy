# نقاط ضعف الـMicroprocessor  


تشير نقاط ضعف او الـ(vulnerabilities) المعالجات الدقيقة إلى نقاط الضعف أو العيوب في تصميم أو تنفيذ المعالجات الدقيقة التي يمكن استغلالها للإضرار بأمن نظام الحوسبة

<br>


إحدى فئات الثغرات الأمنية المعروفة على نطاق واسع في المعالجات الدقيقة تتعلق بهجمات الـside-channels

 وتستغل هذه الأجهزة تسرب المعلومات غير المباشرة مثل معلومات التوقيت، أو استهلاك الطاقة، أو الانبعاثات الكهرومغناطيسية. 

 
 ومن الأمثلة على هجوم الـSide-channel ثغرات Spectre و Meltdown التي تم اكتشافها في عام 2018

 الثغرات الأمنية في المعالجات الدقيقة مصدر قلق كبير بسبب الدور الحاسم الذي تلعبه هذه المكونات في البنية التحتية الحسابية الحديثة بدءًا من الأجهزة الشخصية والأنظمة المدمجة وحتى الخوادم ومراكز البيانات

 
 <br>

 


 ### Spectre

 
<p align="left">
  <img src="https://academy.hackthebox.com/storage/modules/230/spectre.png" width="200">
</p>

الـSpectre هي فئة من الثغرات الأمنية في المعالجات الدقيقة تم الكشف عنها علنًا في عام 2018. تم تحديدها رسميًا باسم CVE-2017-5753 و  CVE-2017-5715

[CVE-2017-5753](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-5753)
[CVE-2017-5715](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-5715)



<br>

تم اكتشاف Spectre والإبلاغ عنه بشكل مستقل بواسطة "جان هورن" من Google Project Zero و"بول كوشر". تعاون كوشر مع العديد من الآخرين، بما في ذلك "دانييل جينكين"، و "مايك هامبورغ" ، و "موريتز ليب" ، و "يوفال ياروم"


عشان تفهم **Spectre** تخيل ان المعالج هو دماغ الحاسب 

بالعاده يتنبأ المعالج بما ستفعله بعد ذلك ويبدأ في القيام بذلك مسبقًا (مثل فتح الباب قبل أن تصل إليه)

إذا كان التوقع صحيحا، عظيم! إذا كان الأمر خاطئًا، فإن المعالج يمحو تخمينه ويبدأ من جديد

هذي التقنية بالمعالج اسمها **speculative execution** او التنفيذ التخميني و **Spectre** يستغل هذي التقنية

في السيناريو العادي، إذا كانت تنبؤات المعالج صحيحه، فسيتم تنفيذ الـexecuted instructions الي خمنها المعالج، ويتم استخدام نتائجه

إذا كانت التوقعات خاطئة، يتم تجاهل الـexecuted instructions الي خمنها المعالج وتأثيراتها المباشرة للحفاظ على صحة البرنامج

 وهنا تكمن المشكلة! على الرغم من تجاهل التأثيرات المباشرة للـ speculative execution غير الصحيحه، فقد تستمر التأثيرات الدقيقة وغير المباشرة يسمونها الـindirect effects،

 خاصة في الـmicro-architectural structures مثل الـcache
 
 
الي تسويه ثغرة **Spectre** انها تحاول تخلي المعالج يسوي تنبؤات غير صحيحة بالعمد وعن طريقها تخلي الـspeculative execution ينفذ مجموعة مختارة من الـinstructions


تعمل هذه الـinstructions على تغيير حالة المعالج بطرق غير تقليدية، مثل تحميل بيانات معينة في الـcache

على الرغم من أنه يتم تجاهل هذه الـinstructions التي تم التلاعب بها ونتائجها المباشرة عندما المعالج يسوي detect للتنبؤ غير الصحيح، إلا أن التعديلات التي تم إجراؤها على الـcache تظل قائمة

ومع ذلك، لا يزال المخترقين غير قادرين على الوصول مباشرة إلى هذه البيانات الي تم تحميلها في الـcache؛ إنهم بحاجة إلى استخدام هجوم Side-Channel لاستنتاج البيانات التي تم تحميلها في الـcache والكشف عن البيانات الحساسة المحتملة والتي كان ينبغي أن تكون آمنة ولا يمكن الوصول إليها


 <br>

### Meltdown

<p align="left">
  <img src="https://academy.hackthebox.com/storage/modules/230/meltdown.png" width="200">
</p>

الـMeltdown، والتي تم تحديدها رسميًا باسم CVE-2017-5754، هي ثغرة أمنية خطيرة في المعالجات الدقيقة تم الكشف عنها علنًا في عام 2018، إلى جانب ثغرات Spectre المذكورة أعلاه

[CVE-2017-5754](https://www.cvedetails.com/cve/CVE-2017-5754/)

تم اكتشاف الـmeltdown والإبلاغ عنه بشكل مستقل من قبل ثلاثة فرق:


"جان هورن" من Google Project Zero؛

"ويرنر هاس" و "توماس بريشر" من شركة Cyberus Technology؛ 

و "دانييل جروس"، و "موريتز ليب"، و "ستيفان مانجارد" ، و "مايكل شوارتز" من جامعة غراتس للتكنولوجيا



على عكس Spectre، الـMeltdown تستغل تقنية في المعالجات اسمها  **out-of-order execution**

 هذه تقنية لتحسين الأداء يقوم فيها المعالج بتنفيذ الـinstructions  ليس بالترتيب التسلسلي الذي تظهر به في البرنامج ولكن بترتيب يمليه توفر بيانات الإدخال و الـexecution units وبالتالي زيادة استخدام الموارد والإنتاجية إلى الحد الأقصى

 ومع ذلك، في حين أن النتائج النهائية للـexecution يتم الالتزام بها بالترتيب

 إلا أنه لا يزال من الممكن ملاحظة تأثيرات الـinstructions  التي يتم تنفيذها خارج الترتيب في الحالة المعمارية الدقيقة للمعالج (processor's micro-architectural state)

حتى لو تم التراجع عن هذه الـinstructions لاحقًا.



 
 ### Mitigation strategies

 | Attack name       |  Attack Mitigation            |
|------------------|---------------------|
| Spectre    | Retpoline        |
| Meltdown    | KPTI        |





 
